{% load static %}
{% load extra_tags %}

<script>
    window.generator = () => {
        return {
            step: "{{ step|default:'1' }}",
            name: "{{ name|default:'' }}",
            description: `{{ description|default:'' }}`,
            topic: {{ topic.pk|default:"''" }},
            structure: {{ structure.pk|default:"''" }},
            block1: {{ block1.pk|default:"''" }},
            block2: {{ block2.pk|default:"''" }},
            block3: {{ block3.pk|default:"''" }},
            block4: {{ block4.pk|default:"''" }},
            block5: {{ block5.pk|default:"''" }},
            exercise1: {{ exercise1.pk|default:"''" }},
            exercise2: {{ exercise2.pk|default:"''" }},
            exercise3: {{ exercise3.pk|default:"''" }},
            exercise4: {{ exercise4.pk|default:"''" }},
            exercise5: {{ exercise5.pk|default:"''" }},
            phases: {% if structure.phase5 %}5{% else %}4{% endif %},
            user: '',
            show: 0,
            escape(url) {
                const completeUrl = `https://training.vfr-garching.com${url}`
                return encodeURIComponent(completeUrl);
            },
            disabled() {
                if (this.step === '1' && this.topic === '') return true;
                if (this.step === '2' && this.structure === '') return true;
                if (this.step === '3' && (this.block1 === '' || this.block2 === '' || this.block3 === '' || this.block4 === '' || (this.phases === 5 && this.block5 === ''))) return true;
                return false;
            }
        }
    }
</script>